{
    "collab_server" : "",
    "contents" : "###################################################################################\n################## Exploration of USCG Emissions Data in Louisiana ################\n######################### Joan Meiners 2018 #######################################\n\n### This script is for combining all years of emissions data. See separate scripts for specific years ####\nsetwd(\"/Users/joanmeiners/Dropbox/NOLA.com/USCG-Emissions/\")\n\n#load libraries\nlibrary(dplyr)\nlibrary(tidyverse)\nlibrary(ggplot2)\n\n# run other yearly scripts first to generate objects to combine\nall_emissions = full_join(sumCY08, sumCY09)\nall_emissions = full_join(all_emissions, sumCY10)\nall_emissions = full_join(all_emissions, sumCY11)\nall_emissions = full_join(all_emissions, sumCY12)\nall_emissions = full_join(all_emissions, sumCY13)\nall_emissions = full_join(all_emissions, sumCY14)\nall_emissions = full_join(all_emissions, sumCY15)\nall_emissions = full_join(all_emissions, sumCY16)\nall_emissions = full_join(all_emissions, sumCY17)\ndim(all_emissions)\nall_emissions = all_emissions[,c(1,14,2:13)]\nunique(all_emissions$Year)\nunique(all_emissions$LOCATION_STATE)\nView(all_emissions)\n\n# remove states that aren't actually states from dataset\nnonstates = c(\"AS\",\"BF\",\"CN\",\"GU\",\"MX\",\"NI\",\"XX\",\"PI\",\"PN\",\"CB\",\"BV\",\"BE\")\ndim(all_emissions)\nall_emissions = all_emissions[!(all_emissions$LOCATION_STATE == \"AS\") & !(all_emissions$LOCATION_STATE == \"BF\") & !(all_emissions$LOCATION_STATE == \"CN\") & !(all_emissions$LOCATION_STATE == \"GU\") & !(all_emissions$LOCATION_STATE == \"MX\") & !(all_emissions$LOCATION_STATE == \"NI\") & !(all_emissions$LOCATION_STATE == \"XX\") & !(all_emissions$LOCATION_STATE == \"PI\") & !(all_emissions$LOCATION_STATE == \"PN\") & !(all_emissions$LOCATION_STATE == \"CB\") & !(all_emissions$LOCATION_STATE == \"BV\") & !(all_emissions$LOCATION_STATE == \"BE\"), ]\ndim(all_emissions)\nunique(all_emissions$LOCATION_STATE)\n\n# prep data for plotting\nall_emissions$Year = as.numeric(all_emissions$Year)\ncols = c(\"black\",\"black\",\"black\",\"black\",\"lightblue\",\"black\",\"black\",\"black\",\"black\",\"darkblue\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"red\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"darkorange\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\",\"black\")\n# alternate cols call for Mississippi spills plot\n#cols = c(\"grey\",\"grey\",\"black\",\"grey\",\"lightblue\",\"grey\",\"grey\",\"grey\",\"grey\",\"darkblue\",\"grey\",\"grey\",\"black\",\"grey\",\"black\",\"grey\",\"grey\",\"black\",\"red\",\"grey\",\"grey\",\"grey\",\"grey\",\"black\",\"black\",\"black\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"black\",\"darkorange\",\"grey\",\"grey\",\"grey\",\"grey\",\"grey\",\"black\",\"grey\",\"grey\",\"grey\")\n\n# plot trend in spills in LA over time compared to state average\nquartz(height = 6, width = 10)\nggplot(all_emissions, aes(x = Year, y = TOTAL_Spills, colour = LOCATION_STATE)) +\n  geom_point() + \n  geom_smooth(method = \"lm\", color = \"grey\") +\n  xlab(\"Year\") + ylab(\"Number of Spills\") +\n  theme(axis.title = element_text(family = \"Trebuchet MS\", color=\"#666666\", face=\"bold\", size=15)) +\n  theme(axis.text = element_text(family = \"Trebuchet MS\", color=\"#666666\", face=\"bold\", size=10)) +\n  scale_x_continuous(breaks=c(2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017)) +\n  scale_y_continuous(labels = function(x) paste0(scales::comma(x))) +\n  scale_color_manual(values=cols)\n\n# code to save graphs\n#tiff(filename = \"Gulf_Spills\", units = \"in\", compression = \"lzw\", res = 300, width = 10, height = 6)\n#dev.off()\n",
    "created" : 1542603292577.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3320973789",
    "id" : "3A498679",
    "lastKnownWriteTime" : 1539869113,
    "last_content_update" : 1539869113,
    "path" : "~/Dropbox/NOLA.com/USCG-Emissions/Emissions_script.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}